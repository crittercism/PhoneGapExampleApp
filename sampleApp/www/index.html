<!DOCTYPE html>
<html>
  <head>
    <title>HTML5 Demo</title>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
  </head>
  <body bgcolor="#ECEBEB">
    <script type="text/javascript">
function breadcrumb() {
  var newBreadcrumb = document.getElementById("breadcrumbText").value;
  Crittercism.leaveBreadcrumb(newBreadcrumb);
};
function username() {
  var newUsername = document.getElementById("usernameText").value;
  Crittercism.setUsername(newUsername);
};
function metadata() {
  var newMetadata = document.getElementById("metadataText").value;
  try {
    newMetadata = JSON.parse(newMetadata);
    for (var prop in newMetadata) {
      if (newMetadata.hasOwnProperty(prop)) {
        Crittercism.setValueForKey(prop, newMetadata.prop);
      }
    }

    Crittercism.setMetadata(JSON.parse(newMetadata));
  } catch (e) {
    alert("Invalid JSON, aborting"+e);
  };
};
function exception() {
  var exceptionName = document.getElementById("exceptionNameText").value;
  var exceptionMessage = document.getElementById("exceptionMessageText").value;
  var error = new Error();
  error.name = exceptionName;
  error.message = exceptionMessage;
  logException(error);
};

function logException(error) {
  try {
    throw error;
  } catch (e) {
    Crittercism.logHandledException(e);
  }
}

function crash() {
  nonFunction();
};

function nonFunction() {
  crash456;       // ridiculous nonsense that causes a crash
}

function displayNavigator() {
  alert(navigator.userAgent);
};
    </script>
    <p id="critter" align="center">HTML5 Demo</p>
    <table align="center">
      <tr>
        <td>
          <button id="breadcrumbButton" onclick="breadcrumb()">Leave Breadcrumb:</button>
        </td>
        <td>
          <input id="breadcrumbText" type="text" value="My Breadcrumb" />
        </td>
      </tr>
      <tr>
        <td>
          <button id="usernameButton" onclick="username()">Set Username:</button>
        </td>
        <td>
          <input id="usernameText" type="text" value="My Critter" />
        </td>
      </tr>
      <tr>
        <td>
          <button id="metadataButton" onclick="metadata()">Set Metadata:</button>
        </td>
        <td>
          <input id="metadataText" type="text" value='{"a":1,"b":2}' />
        </td>
      </tr>
      <tr>
        <td valign="top">
          <button id="exceptionButton" onclick="exception()">Log Handled Exception:</button>
        </td>
        <td>
          <input id="exceptionNameText" type="text" value="Error" /><br />
          <input id="exceptionMessageText" type="text" value="exception message!!!" />
        </td>
      </tr>
      <tr>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td align="center" colspan="2">
          <button id="crashButton" onclick="crash()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Crash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
        </td>
      </tr>
      <tr>
        <td align="center" colspan="2">
          <button id="navigatorButton" onclick="displayNavigator()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Navigator&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
        </td>
      </tr>
    </table>
  </body>
</html>
